const Sakura=function(e,t){if(typeof e=="undefined")throw new Error("No selector present. Define an element.");this.el=document.querySelector(e);const r={className:"sakura",fallSpeed:1,maxSize:14,minSize:10,delay:300,colors:[{gradientColorStart:"rgba(255, 183, 197, 0.9)",gradientColorEnd:"rgba(255, 197, 208, 0.9)",gradientColorDegree:120}],lifeTime:0},c=function(e,t){return Object.keys(e).forEach(n=>{if(t&&Object.prototype.hasOwnProperty.call(t,n)){const s=e;s[n]=t[n]}}),e};this.settings=c(r,t),this.petalsWeak=new Map,setInterval(()=>{if(!this.settings.lifeTime)return;const e=[],t=Date.now();for(const[n,s]of this.petalsWeak)n+this.settings.lifeTime<t&&(e.push(n),s.remove());for(const t of e)this.petalsWeak.delete(t)},1e3),this.el.style.overflowX="hidden";function s(e){return e[Math.floor(Math.random()*e.length)]}function n(e,t){return Math.floor(Math.random()*(t-e+1))+e}const o=["webkit","moz","MS","o",""];function i(e,t,n){for(let s=0;s<o.length;s+=1){let i=t;o[s]||(i=t.toLowerCase()),e.addEventListener(o[s]+i,n,!1)}}function a(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}this.createPetal=()=>{this.el.dataset.sakuraAnimId&&setTimeout(()=>{window.requestAnimationFrame(this.createPetal)},this.settings.delay);const r={blowAnimations:["blow-soft-left","blow-medium-left","blow-soft-right","blow-medium-right"],swayAnimations:["sway-0","sway-1","sway-2","sway-3","sway-4","sway-5","sway-6","sway-7","sway-8"]},u=s(r.blowAnimations),h=s(r.swayAnimations),t=(document.documentElement.clientHeight*.007+Math.round(Math.random()*5))*this.settings.fallSpeed,m=[`fall ${t}s linear 0s 1`,`${u} ${(t>30?t:30)-20+n(0,20)}s linear 0s infinite`,`${h} ${n(2,4)}s linear 0s infinite`],c=m.join(", "),e=document.createElement("div");e.classList.add(this.settings.className);const l=n(this.settings.minSize,this.settings.maxSize),d=l-Math.floor(n(0,this.settings.minSize)/3),o=s(this.settings.colors);e.style.background=`linear-gradient(${o.gradientColorDegree}deg, ${o.gradientColorStart}, ${o.gradientColorEnd})`,e.style.webkitAnimation=c,e.style.animation=c,e.style.borderRadius=`${n(this.settings.maxSize,this.settings.maxSize+Math.floor(Math.random()*10))}px ${n(1,Math.floor(d/4))}px`,e.style.height=`${l}px`,e.style.left=`${Math.random()*document.documentElement.clientWidth-100}px`,e.style.marginTop=`${-(Math.floor(Math.random()*20)+15)}px`,e.style.width=`${d}px`,i(e,"AnimationEnd",()=>{a(e)||e.remove()}),i(e,"AnimationIteration",()=>{a(e)||e.remove()}),this.petalsWeak.set(Date.now(),e),this.el.appendChild(e)},this.el.setAttribute("data-sakura-anim-id",window.requestAnimationFrame(this.createPetal))};Sakura.prototype.start=function(){const e=this.el.dataset.sakuraAnimId;if(e)throw new Error("Sakura is already running.");this.el.setAttribute("data-sakura-anim-id",window.requestAnimationFrame(this.createPetal))},Sakura.prototype.stop=function(e=!1){const t=this.el.dataset.sakuraAnimId;t&&(window.cancelAnimationFrame(t),this.el.setAttribute("data-sakura-anim-id","")),e||setTimeout(()=>{const e=document.getElementsByClassName(this.settings.className);for(;e.length>0;)e[0].parentNode.removeChild(e[0])},this.settings.delay+50)}